<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReconAI v2.0 - OSINT Intelligence Platform</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <span class="logo-icon">⚡</span>
                <h1>ReconAI <span class="version">v2.0</span></h1>
            </div>
            <p class="tagline">OSINT Intelligence Platform</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <a href="#" class="nav-link active">Dashboard</a>
            <a href="#" class="nav-link">Scans</a>
            <a href="#" class="nav-link">Reports</a>
            <a href="#" class="nav-link">Settings</a>
        </div>
    </nav>

    <main class="container">
        <section class="scan-form">
            <h2>New Reconnaissance Scan</h2>
            
            <div class="form-group">
                <label>Target Type</label>
                <select id="targetType" onchange="updateFormFields()">
                    <option value="domain">Domain / IP Address</option>
                    <option value="person">Person / Individual</option>
                </select>
            </div>

            <!-- Domain Scan Fields -->
            <div id="domainFields">
                <div class="form-group">
                    <label>Target Domain or IP</label>
                    <input type="text" id="domainTarget" placeholder="example.com">
                </div>

                <div class="form-group">
                    <label>Scan Type</label>
                    <select id="scanType">
                        <option value="full">Full Scan (All Modules)</option>
                        <option value="quick">Quick Scan (Domain + Web)</option>
                        <option value="custom">Custom Modules</option>
                    </select>
                </div>

                <div class="form-group" id="moduleSelection" style="display: none;">
                    <label>Select Modules</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" value="domain" checked> Domain Intelligence</label>
                        <label><input type="checkbox" value="web" checked> Web Intelligence</label>
                        <label><input type="checkbox" value="network" checked> Network Intelligence</label>
                        <label><input type="checkbox" value="social" checked> Social Intelligence</label>
                        <label><input type="checkbox" value="threat" checked> Threat Intelligence</label>
                    </div>
                </div>
            </div>

            <!-- Person Scan Fields -->
            <div id="personFields" style="display: none;">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="personName" placeholder="John Smith">
                </div>

                <div class="form-group">
                    <label>State (Optional)</label>
                    <select id="personState">
                        <option value="">Select State</option>
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Date of Birth (Optional)</label>
                    <input type="date" id="personDOB">
                </div>

                <div class="warning-box">
                    <strong>⚠️ Legal Notice:</strong> Person intelligence gathering must only be performed for authorized purposes such as employment screening, tenant screening, or investigations with proper legal authority. Unauthorized use may violate privacy laws and regulations.
                </div>
            </div>

            <button id="startScanBtn" onclick="startScan()">Start Reconnaissance</button>
            <div id="scanStatus" style="display: none;"></div>
        </section>

        <section class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalScans">0</div>
                <div class="stat-label">Total Scans</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completedScans">0</div>
                <div class="stat-label">Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalFindings">0</div>
                <div class="stat-label">Findings</div>
            </div>
        </section>

        <section class="recent-scans">
            <h2>Recent Scans</h2>
            <div id="scansList"></div>
        </section>

        <section id="resultsSection" style="display: none;">
            <h2>Scan Results</h2>
            <div id="resultsContent"></div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>ReconAI v2.0 - For Authorized Security Testing Only</p>
            <p>⚠️ Unauthorized reconnaissance may violate computer fraud and privacy laws</p>
        </div>
    </footer>

    <script>
        function updateFormFields() {
            const targetType = document.getElementById('targetType').value;
            const domainFields = document.getElementById('domainFields');
            const personFields = document.getElementById('personFields');

            if (targetType === 'person') {
                domainFields.style.display = 'none';
                personFields.style.display = 'block';
            } else {
                domainFields.style.display = 'block';
                personFields.style.display = 'none';
            }
        }

        async function startScan() {
            const targetType = document.getElementById('targetType').value;
            const btn = document.getElementById('startScanBtn');
            const status = document.getElementById('scanStatus');

            let requestData = {
                target_type: targetType,
                scan_type: 'full'
            };

            if (targetType === 'domain') {
                requestData.target = document.getElementById('domainTarget').value;
                requestData.modules = ['domain', 'web', 'network', 'social', 'threat'];
            } else {
                requestData.target = document.getElementById('personName').value;
                requestData.state = document.getElementById('personState').value || null;
                requestData.dob = document.getElementById('personDOB').value || null;
            }

            if (!requestData.target) {
                alert('Please enter a target');
                return;
            }

            btn.disabled = true;
            btn.textContent = '⟳ Scanning...';
            status.style.display = 'block';
            status.textContent = 'Gathering intelligence...';

            try {
                const response = await fetch('/api/scan', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(requestData)
                });

                const data = await response.json();
                
                displayResults(data);
                loadStats();
                loadRecentScans();

                status.textContent = 'Scan completed successfully!';
                setTimeout(() => {
                    status.style.display = 'none';
                }, 3000);

            } catch (error) {
                status.textContent = 'Error: ' + error.message;
            } finally {
                btn.disabled = false;
                btn.textContent = 'Start Reconnaissance';
            }
        }

        function displayResults(data) {
            const resultsSection = document.getElementById('resultsSection');
            const resultsContent = document.getElementById('resultsContent');
            
            resultsSection.style.display = 'block';
            resultsContent.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        async function loadStats() {
            try {
                const response = await fetch('/api/stats');
                const data = await response.json();
                
                document.getElementById('totalScans').textContent = data.total_scans;
                document.getElementById('completedScans').textContent = data.completed_scans;
                document.getElementById('totalFindings').textContent = data.total_findings;
            } catch (error) {
                console.error('Failed to load stats:', error);
            }
        }

        async function loadRecentScans() {
            try {
                const response = await fetch('/api/scans?limit=5');
                const data = await response.json();
                
                const scansList = document.getElementById('scansList');
                scansList.innerHTML = '';
                
                data.scans.forEach(scan => {
                    const scanCard = document.createElement('div');
                    scanCard.className = 'scan-card';
                    scanCard.innerHTML = `
                        <div class="scan-header">
                            <strong>${scan.target}</strong>
                            <span class="badge badge-${scan.status}">${scan.status}</span>
                        </div>
                        <div class="scan-meta">
                            ${new Date(scan.created_at).toLocaleString()}
                        </div>
                    `;
                    scansList.appendChild(scanCard);
                });
            } catch (error) {
                console.error('Failed to load recent scans:', error);
            }
        }

        // Load initial data
        loadStats();
        loadRecentScans();
    </script>
</body>
</html>

